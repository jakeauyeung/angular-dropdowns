"use strict";var dd=angular.module("ngDropdowns",[]);dd.directive("dropdownSelect",["DropdownService","$window",function(e,o){return{restrict:"A",replace:!0,scope:{dropdownSelect:"=",dropdownModel:"=",dropdownOnchange:"&"},controller:["$scope","$element","$attrs",function(o,n,d){o.labelField=d.dropdownItemLabel||"text",o.countField=d.dropdownItemCount||"text",e.register(n),this.select=function(e){e!==o.dropdownModel&&angular.copy(e,o.dropdownModel),o.dropdownOnchange({selected:e})};var t="click";n.bind(t,function(d){d.stopPropagation(),e.toggleActive(n,o.dropdownModel.name)}),o.$on("$destroy",function(){e.unregister(n)})}],template:['<div class="wrap-dd-select">','<div class="nav-mask"></div>','<span class="selected"><span class="selected-item">{{dropdownModel[labelField]}}</span><i class="sarrow"></i>','<ul class="dropdown">','<li ng-repeat="item in dropdownSelect"',' class="dropdown-item"',' dropdown-select-item="item"',' dropdown-item-count="countField"',' dropdown-item-label="labelField">',"</li>","</ul>","</div>"].join("")}}]),dd.directive("dropdownSelectItem",[function(){return{require:"^dropdownSelect",replace:!0,scope:{dropdownItemLabel:"=",dropdownItemCount:"=",dropdownSelectItem:"="},link:function(e,o,n,d){e.selectItem=function(){e.dropdownSelectItem.href||d.select(e.dropdownSelectItem)}},template:['<li ng-class="{divider: dropdownSelectItem.divider}">','<a href="" class="dropdown-item"',' ng-if="!dropdownSelectItem.divider"',' ng-href="{{dropdownSelectItem.href}}"',' ng-click="selectItem()">','<i class="drop-list-text">{{dropdownSelectItem[dropdownItemLabel]}}</i>','<span class="check icon-check"></span>','<span class="num">{{dropdownSelectItem[dropdownItemCount]}}</span>',"</a>","</li>"].join("")}}]),dd.directive("dropdownMenu",["$parse","$compile","DropdownService","$window",function(e,o,n,d){return{restrict:"A",replace:!1,scope:{dropdownMenu:"=",dropdownModel:"=",dropdownOnchange:"&"},controller:["$scope","$element","$attrs",function(e,d,t){e.labelField=t.dropdownItemLabel||"text",e.countField=t.dropdownItemCount||"text";var r="click",i=angular.element(['<ul class="dropdown">','<li ng-repeat="item in dropdownMenu"',' class="dropdown-item"',' dropdown-item-label="labelField"',' dropdown-item-count="countField"',' dropdown-menu-item="item">',"</li>","</ul>"].join(""));i.data("$dropdownMenuController",this);var l=o(i)(e),c=angular.element('<div class="wrap-dd-menu"></div>');d.replaceWith(c),c.append(d),c.append(l),n.register(l),this.select=function(o){o!==e.dropdownModel&&angular.copy(o,e.dropdownModel),e.dropdownOnchange({selected:o})},d.bind(r,function(e){e.stopPropagation(),n.toggleActive(l)}),e.$on("$destroy",function(){n.unregister(l)})}]}}]),dd.directive("dropdownMenuItem",[function(){return{require:"^dropdownMenu",replace:!0,scope:{dropdownMenuItem:"=",dropdownItemLabel:"=",dropdownItemCount:"="},link:function(e,o,n,d){e.selectItem=function(){e.dropdownMenuItem.href||d.select(e.dropdownMenuItem)}},template:['<li ng-class="{divider: dropdownMenuItem.divider}">','<a href="" class="dropdown-item"',' ng-if="!dropdownMenuItem.divider"',' ng-click="selectItem()">',"{{dropdownMenuItem[dropdownItemLabel]}}","</a>","</li>"].join("")}}]),dd.factory("DropdownService",["$document",function(e){var o=e.find("body"),n={},d=[];return o.bind("click",function(){angular.forEach(d,function(e){e.removeClass("active")})}),n.register=function(e){d.push(e)},n.unregister=function(e){var o;o=d.indexOf(e),o>-1&&d.splice(o,1)},n.toggleActive=function(e,o){$(".wrap-dd-select-city").removeClass("active"),angular.forEach(d,function(o){o!==e&&o.removeClass("active")});var n=e.find("i");angular.forEach(n,function(e){var n=$(e).text();o===n?$(e).parents("a").addClass("cur"):$(e).parents("a").removeClass("cur")}),e.find("a").bind("click",function(o){o.stopPropagation(),e.removeClass("active")}),e.toggleClass("active")},n}]);